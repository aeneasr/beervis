<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.1.6.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <style>
        #graph {
            margin: auto 0;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="page-header">
        <div class="pull-right">
            <select class="form-control" id="selector">
                <option value="besucher_gesamt" selected>Besucher gesamt</option>
                <option value="dauer">Dauer</option>
                <option value="besucher_tag">Besucher pro Tag</option>
            </select>
        </div>
        <h1>Beervis</h1>
    </div>

    <div id="graph">
    </div>
</div>
<script type="text/javascript">
    var data = [
        {"jahr": 1985, "dauer": 16, "besucher_gesamt": 7100000, "besucher_tag": 444000, "bier_konsum": 54541},
        {"jahr": 1986, "dauer": 16, "besucher_gesamt": 6700000, "besucher_tag": 419000, "bier_konsum": 53807},
        {"jahr": 1987, "dauer": 16, "besucher_gesamt": 6500000, "besucher_tag": 406000, "bier_konsum": 51842},
        {"jahr": 1988, "dauer": 16, "besucher_gesamt": 5700000, "besucher_tag": 356000, "bier_konsum": 50951},
        {"jahr": 1989, "dauer": 16, "besucher_gesamt": 6200000, "besucher_tag": 388000, "bier_konsum": 51241},
        {"jahr": 1990, "dauer": 16, "besucher_gesamt": 6700000, "besucher_tag": 419000, "bier_konsum": 54300},
        {"jahr": 1991, "dauer": 16, "besucher_gesamt": 6400000, "besucher_tag": 400000, "bier_konsum": 54686},
        {"jahr": 1992, "dauer": 16, "besucher_gesamt": 5900000, "besucher_tag": 369000, "bier_konsum": 48888},
        {"jahr": 1993, "dauer": 16, "besucher_gesamt": 6500000, "besucher_tag": 406000, "bier_konsum": 51933},
        {"jahr": 1994, "dauer": 16, "besucher_gesamt": 6600000, "besucher_tag": 413000, "bier_konsum": 52108},
        {"jahr": 1995, "dauer": 16, "besucher_gesamt": 6700000, "besucher_tag": 419000, "bier_konsum": 50162},
        {"jahr": 1996, "dauer": 16, "besucher_gesamt": 6900000, "besucher_tag": 431000, "bier_konsum": 52622},
        {"jahr": 1997, "dauer": 16, "besucher_gesamt": 6400000, "besucher_tag": 400000, "bier_konsum": 55891},
        {"jahr": 1998, "dauer": 16, "besucher_gesamt": 6500000, "besucher_tag": 406000, "bier_konsum": 54782},
        {"jahr": 1999, "dauer": 16, "besucher_gesamt": 6500000, "besucher_tag": 406000, "bier_konsum": 60054},
        {"jahr": 2000, "dauer": 18, "besucher_gesamt": 6900000, "besucher_tag": 383000, "bier_konsum": 64591},
        {"jahr": 2001, "dauer": 16, "besucher_gesamt": 5500000, "besucher_tag": 344000, "bier_konsum": 48698},
        {"jahr": 2002, "dauer": 16, "besucher_gesamt": 5900000, "besucher_tag": 369000, "bier_konsum": 57614},
        {"jahr": 2003, "dauer": 16, "besucher_gesamt": 6300000, "besucher_tag": 394000, "bier_konsum": 62294},
        {"jahr": 2004, "dauer": 16, "besucher_gesamt": 5900000, "besucher_tag": 369000, "bier_konsum": 61163},
        {"jahr": 2005, "dauer": 17, "besucher_gesamt": 6100000, "besucher_tag": 359000, "bier_konsum": 61772},
        {"jahr": 2006, "dauer": 18, "besucher_gesamt": 6500000, "besucher_tag": 361000, "bier_konsum": 68617},
        {"jahr": 2007, "dauer": 16, "besucher_gesamt": 6200000, "besucher_tag": 388000, "bier_konsum": 69406},
        {"jahr": 2008, "dauer": 16, "besucher_gesamt": 6000000, "besucher_tag": 375000, "bier_konsum": 64922},
        {"jahr": 2009, "dauer": 16, "besucher_gesamt": 5700000, "besucher_tag": 356000, "bier_konsum": 66436},
        {"jahr": 2010, "dauer": 17, "besucher_gesamt": 6400000, "besucher_tag": 376000, "bier_konsum": 71000},
        {"jahr": 2011, "dauer": 17, "besucher_gesamt": 6900000, "besucher_tag": 406000, "bier_konsum": 79225},
        {"jahr": 2012, "dauer": 16, "besucher_gesamt": 6400000, "besucher_tag": 400000, "bier_konsum": 74025},
        {"jahr": 2013, "dauer": 16, "besucher_gesamt": 6400000, "besucher_tag": 400000, "bier_konsum": 77031},
        {"jahr": 2014, "dauer": 16, "besucher_gesamt": 6300000, "besucher_tag": 394000, "bier_konsum": 76808}
    ], cw = document.getElementById('graph').clientWidth;

    function draw(field) {
        var svg = dimple.newSvg("#graph", 1140, 600);
        var chart = new dimple.chart(svg, data);
        chart.addCategoryAxis("x", "jahr");
        chart.addMeasureAxis("y", field);
        chart.addSeries(null, dimple.plot.bar);
        chart.draw();
    }

    $('#selector').on('change', function() {
        var self = this;
        $('#graph>*:first').remove();
        draw(self.value);
    });
    draw('besucher_gesamt');
</script>
</body>